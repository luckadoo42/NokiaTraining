<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="id9YZ-09126-MT00-REZZA-SP2-Changing-user-password-when-user-created"><title>Changing user password when a user is created</title><taskbody id="d1e83366"><context><sectiondiv>
                                                  <p><b>Overview</b></p>
                                                  <p>The NCC enforces the default password change.
                                                  When a new Linux user is created, that user is
                                                  assigned the default password. This procedure
                                                  provides instructions on how to change the default
                                                  password for a new Linux user when this user is
                                                  created. In this procedure, first the password is
                                                  changed on one VM and then this new password is
                                                  propagated to the rest of the VMs.</p>
                                                  <note>
                                                  <p>This procedure does not apply or refer to the
                                                  root user. SM user administration and the
                                                  assignment of roles for SM users are described in
                                                  the <i>Global Configuration Guide</i>.</p>
                                                  </note>
                                                  </sectiondiv><note>Passwords are case
                                                  sensitive.</note><p><b>Before you
                                                  begin:</b></p>For more information, see the
                                                  following sections:<ul id="ul_ujt_lyt_wmb">
                                                  <li>
                                                  <p>
                                                  <!--xref URI: t-oam-security-configure-security-parameters.xml#password-rules-->
                                                  <xref
                                                  keyref="id9YZ-09126-MT00-REZZA-SP2-d1e99631/password-rules"
                                                  />
                                                  </p>
                                                  </li>
                                                  <li>
                                                  <p>
                                                  <!--xref URI: t-oam-security-add-user.xml#add-user-tool-->
                                                  <xref
                                                  keyref="id9YZ-09126-MT00-REZZA-SP2-add-user-tool"
                                                  />
                                                  </p>
                                                  </li>
                                                  <li>
                                                  <p>
                                                  <!--xref URI: t-oam-security-change-password.xml#change-password-tool-->
                                                  <xref
                                                  keyref="id9YZ-09126-MT00-REZZA-SP2-change-password-tool"
                                                  />
                                                  </p>
                                                  </li>
                                                  <li>
                                                  <p>
                                                  <!--xref URI: t-oam-security-modify-user.xml#modify-user-tool-->
                                                  <xref
                                                  keyref="id9YZ-09126-MT00-REZZA-SP2-modify-user-tool"
                                                  />
                                                  </p>
                                                  <p>To change the user password when a user is
                                                  created:</p>
                                                  </li>
                                                  </ul></context><steps>
<step><cmd>Log in to the Active OAME VM to create a new user with <codeph>add-user</codeph> tool by entering:</cmd><info><p>
<codeph>/opt/tpa/sbin/add-user -T all &lt;username&gt;</codeph>
</p></info></step>
<step><cmd>Log in to any VM as &lt;username&gt; to change the new user’s password on this particular VM.</cmd><info><note>
<p>On the first login, the system enforces password change. The default user password is <varname>username</varname>_SPS19. For example, the default</p>
<p>password for the new user with username steve is steve_SPS19.</p>
</note></info></step>
<step><cmd>Enter the new user’s default password when the following command prompt appears:</cmd><info><p>
<codeph>WARNING: Your password has expired.</codeph>
</p><p>
<codeph>You must change your password now and log in again!</codeph>
</p><p>
<codeph>Changing password for user &lt;username&gt;.</codeph>
</p><p>
<codeph>Enter login password:</codeph>
</p></info></step>
<step><cmd>Enter the new password when the following command prompt appears:</cmd><info><p>
<codeph>New password:</codeph>
</p><note>
<p>For example, Mo!n5to33t is the password that is consistent with all the default rules.</p>
</note></info></step>
<step><cmd>Retype the new password when the following command prompt appears:</cmd><info><p>
<codeph>Retype new password:</codeph>
</p></info></step>
<step><cmd>If password change succeeds on this VM, the output is as follows:</cmd><info><fig>
<codeblock>passwd: password successfully changed for newuser6
passwd: all authentication tokens updated successfully.
Connection to sps-me-auxiliary-0 closed.
</codeblock>
</fig><p>where:</p><ul>
<li>
<p>newuser6 is the new user.</p>
</li>
<li>
<p>sps-me-auxiliary-0 is the VM where the password has been changed.</p>
</li>
</ul><p>In case of failure, determine its cause, find a solution and start the procedure again.</p></info></step>
<step><cmd>As &lt;username&gt;, log in again to the same VM as in step 2.</cmd><info/></step>
<step><cmd>Propagate the new password from step 4 to the rest of the VMs, excluding the VM that you are logged in to, by entering:</cmd><info><p>
<codeph>/usr/local/bin/change-passwd -T all -x &lt;VM&gt; &lt;username&gt;</codeph>
</p><p>where &lt;VM&gt; is the VM that you are logged in to and where the password has already been changed, for example sps-me-auxiliary-0.</p><note>
<p>You can use the internal IP address with <codeph>-x</codeph> option.</p>
</note></info></step>
<step><cmd>Enter the new user’s default password when the following command prompt appears:</cmd><info><p>
<codeph>The current password:</codeph>
</p></info></step>
<step><cmd>Enter the password created in step 5 when the following command prompt appears:</cmd><info><p>
<codeph>The new password:</codeph>
</p></info></step>
<step><cmd>Retype the password created in step 5 when the following command prompt appears:</cmd><info><p>
<codeph>Retype the new password:</codeph>
</p></info></step>
<step><cmd>If password change succeeds on all the other VMs, the output is as follows:</cmd><info><fig>
<codeblock>&lt;2019.02.13 12:32:42 -0500&gt;&lt;sps-me-auxiliary-0&gt;&lt;change-passwd&gt; INFO: Changing password for 'newuser6' on 'all' excluding 'sps-me-auxiliary-0'.
&lt;2019.02.13 12:32:43 -0500&gt;&lt;sps-me-auxiliary-0&gt;&lt;change-passwd&gt; INFO: Done with success.
[newuser6@sps-me-auxiliary-0 ~]$</codeblock>
</fig><p>where:</p><ul>
<li>
<p>newuser6 is the new user.</p>
</li>
<li>
<p>sps-me-auxiliary-0 is the VM where the password was changed first and then propagated to the rest of the VMs.</p>
</li>
</ul><p>In case of failure, do the following:</p><ol>
<li>
<p>Determine the cause of failure and find a solution.</p>
</li>
<li>
<p>Purge the failure tracking by entering:</p>
<p>
<codeph>/opt/tpa/sbin/modify-user -P</codeph>
</p>
</li>
<li>
<p>Repeat the procedure beginning from step 7.</p>
</li>
</ol></info></step>
</steps>
</taskbody></task>