<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="id9yz-09126-mt00-rezza-sp2-backupdb"><title>configure-sctp tool</title><conbody>
<section><title>Description</title>
<p>This command /opt/tpa/bin/configure-sctp must be run by the root user or sudo. It is run on the IOHD and only affects the parameters where you have executed the “configure-sctp” tool. If you are changing the default values for the Linux kernel parameters on one IOHD, you must run this tool on each IOHD in the network.</p>
<p>The tool is used to change the default values of the following Linux kernel parameters:</p><ul>
<li>
<p>net.sctp.association_max_retrans – the default value is 10</p>
</li>
<li>
<p>net.sctp.hb_interval - the default value is 1000 ms </p>
</li>
<li>
<p>net.sctp.pf_retrans - the default value is 0 </p>
</li>
<li>
<p>net.sctp.path_max_retrans - the default value is 4 </p>
</li>
<li>
<p>net.sctp.addr_scope_policy - the default value is 3</p>
</li>
</ul>
<p>In addition to the Linux kernel SCTP parameters that can be configured using configure-sctp tool,
                there are other Linux kernel SCTP parameters that might apply to the NCC. The
                following table lists the SCTP parameters that are not configurable using the
                configure-sctp tool.</p>
<table colsep="1" rowsep="1">
                <title>Other Linux kernel SCTP parameters that might apply to the NCC</title>
                <tgroup cols="3">
                    <colspec colname="COLSPEC1"/>
                    <colspec colname="col1"/>
                    <colspec colname="col2"/>
                    <thead>
                        <row>
                            <entry>
                                <p>Parameter</p>
                            </entry>
                            <entry>
                                <p>Description</p>
                            </entry>
                            <entry>
                                <p>Default value</p>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry> net.sctp.rto_initial </entry>
                            <entry> Retransmit initial timeout in milliseconds </entry>
                            <entry> 3000 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.rto_min </entry>
                            <entry> Retransmit minimum timeout in milliseconds </entry>
                            <entry> 1000 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.rto_max </entry>
                            <entry> Retransmit maximum timeout in milliseconds </entry>
                            <entry> 60000 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.rto_initial </entry>
                            <entry> Initial value of retransmit timeout in milliseconds that is used
                                for RTO calculations </entry>
                            <entry> 3000 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.path_max_retrans </entry>
                            <entry> Number of retransmits triggering path failure </entry>
                            <entry> 4 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.association_max_retrans </entry>
                            <entry> Number of retransmits triggering association failure </entry>
                            <entry> 10 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.max_init_retransmits </entry>
                            <entry> Number of retransmits triggering initial failure </entry>
                            <entry> 8 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.sack_timeout </entry>
                            <entry> SACK delay in milliseconds </entry>
                            <entry> 200 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.hb_interval </entry>
                            <entry> SCTP heartbeat interval in milliseconds </entry>
                            <entry> 1000 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.sctp_wmem </entry>
                            <entry> Socket send buffer size in bytes </entry>
                            <entry> 4096 16384 4194304 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.sctp_rmem </entry>
                            <entry> Socket receive buffer size in bytes </entry>
                            <entry> 4096 865500 4194304 </entry>
                        </row>
                        <row>
                            <entry> net.sctp.max_burst </entry>
                            <entry> Maximum number of new data packets that can be sent in a burst </entry>
                            <entry> 4 </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
</section>
<section><title>Syntax</title>
<codeblock>configure-sctp [-a &lt;association_max_retrans&gt;] [-b &lt;hb_interval&gt;] [-f &lt;pf_retrans&gt;] [-p &lt;path_max_retrans&gt;] [-s &lt;addr_scope_policy&gt;] [-h]</codeblock>
<p>Where the net.sctp parameters are set as follows:</p>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<tbody>
<row>
<entry>
<b>Code</b>
</entry>
<entry>
<b>Description</b>
</entry>
</row>
<row>
<entry>
<codeblock>No arguments</codeblock>
</entry>
<entry>
Displays current running SCTP kernel parameter values.
</entry>
</row>
<row>
<entry>
<codeblock>-h</codeblock>
</entry>
<entry>
Displays usage/help information.
</entry>
</row>
<row>
<entry>
<codeblock>-a &lt;association_max_retrans&gt;</codeblock>
</entry>
<entry>
This is the upper threshold for retries set for the association retransmission counter where the minimum value is 1. It has a default value of 10.
</entry>
</row>
<row>
<entry>
<codeblock>-b &lt;hb_interval&gt;</codeblock>
</entry>
<entry>
The heart beat interval where the minimum value is 1. It has a default value of 1000 ms.
</entry>
</row>
<row>
<entry nameend="col2" namest="col1">
pf is the “potentially failed” state where there can be an enabled or disabled state. A value of pf_retrans &gt; path_max_retrans also disables pf state. That is, one of both pf_enable and pf_retrans &gt; path_max_retrans can disable pf state. Since pf_retrans and path_max_retrans can be changed by userspace application, sometimes user expects to disable pf state by the value of pf_retrans &gt; path_max_retrans, but occasionally the value of pf_retrans or path_max_retrans is changed by the user application, this pf state is enabled. As such, this dynamically enables and disables pf state. The pf_enabled parameter is not configurable.
</entry>
</row>
<row>
<entry>
<codeblock>-f &lt;pf_retrans&gt;</codeblock>
</entry>
<entry>
<p>The number of retransmissions that will be attempted on a given path before traffic is redirected to an alternate transport (should one exist).</p>
<p>This is distinct from path_max_retrans, as a path that passes the pf_retrans threshold can still be used. Its only deprioritized when a transmission path is selected by the stack. This setting is primarily used to enable fast failover mechanisms without having to reduce path_max_retrans to a very low value.</p>
<p>It has a default value of 0.</p>
</entry>
</row>
<row>
<entry>
<codeblock>-p &lt;path_max_retrans&gt;</codeblock>
</entry>
<entry>
The maximum number of retransmissions over all paths depend on the number of paths and the maximum number of retransmissions over each path where the minimum value is 1. It has a default value of 4.
</entry>
</row>
<row>
<entry>
<codeblock>-s &lt;addr_scope_policy&gt;</codeblock>
</entry>
<entry>
<p>Used to control IPv4 address scoping and it has a default value of 3.</p>
<p>The possible values are </p><ul>
<li>
<p>0: Disable IPv4 address scoping.</p>
</li>
<li>
<p>1: Enable IPv4 address scoping.</p>
</li>
<li>
<p>2: Follow draft but allow IPv4 private addresses.</p>
</li>
<li>
<p>3: Follow draft but allow IPv4 link local addresses.</p>
</li>
</ul>
</entry>
</row>
</tbody>
</tgroup>
</table>
<sectiondiv>
<p><b>Example of changing Linux kernel parameters for SCTP</b></p>
<p>You can set the parameter values by the command options, for example:</p>
<p>
<userinput>-sh-4.2$ sudo /opt/tpa/bin/configure-sctp -a 5 -b 1500</userinput>
</p>
<p>Which will set the kernel parameter net.sctp.association_max_retrans to 5 and net.sctp.hb_interval to 1500 on the IOHD where you have executed “configure-sctp”.</p>
</sectiondiv>
</section>
</conbody></concept>