<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="id9YZ-09126-MT00-REZZA-SP2-customruledict"><title>Installing the custom rule dictionary </title><taskbody>
<steps>
<stepsection><b>To install, copy, and distribute the custom rule attribute dictionary</b></stepsection>
<step><cmd>Obtain the CustomRuleAttributeDictionary.xml files that you need from the appropriate repository location provided by Nokia (for example, the PCRFCustomRuleAttributeDictionary.xml, ChargingCustomRuleAttributeDictionary.xml, diameter/rule/ChargingVsaToContextMapping.xml, diameter/rule/VsaToContextMapping.xml or RSCustomRuleAttributeDictionary.xml).</cmd><info/></step>
<step><cmd>Connect to the SM active OAME as the root user.</cmd><info/></step>
<step><cmd>Put the file obtained in step 1 in a directory of your choice on the SM’s Active OAME. </cmd><info><note>
<p>Before copying any files to any NCC VMs, the user must execute the df and du Linux commands from
                            each VM to determine the storage available and whether or not the
                            copying of new files can proceed. Usage of the Linux commands df
                            (abbreviation for disk free) and du (abbreviated from disk usage) can be
                            found on every VM via the Linux manual page by using “man df” and “man
                            du” as root user. There are two storage directories that can be used on
                            any VM as follows:</p><ul>
<li>
<p> First choice, is under the /appdata directory which is created and mounted to the cinder volume (OpenStack)/independent disk (VMware) on every VM.</p>
</li>
<li>
<p>Second choice, is under the /var/log directory which is created and mounted to the cinder volume (OpenStack)/independent disk (VMware) on every VM.</p>
</li>
</ul>
<p>If there is enough storage available, proceed.</p>
<p>When you have completed the task, clean-up the files that are no longer needed.</p>
<p>If there is not enough space, either do some clean-up or contact Nokia Support.</p>
</note></info></step>
<step><cmd>If you are installing a new PCRFCustomRuleAttributeDictionary.xml file, a new ChargingCustomRuleAttributeDictionary.xml, diameter/rule/ChargingVsaToContextMapping.xml, diameter/rule/VsaToContextMapping.xml or a new RSCustomRuleAttributeDictionary.xml run the following command on the SM’s Active OAME:</cmd><info><p>
<userinput>/opt/tpa/bin/distribute-rules-dictionaries -d &lt;directory&gt; [-e &lt;MEs&gt;] [-i &lt;MEs&gt;]</userinput>
</p><p>Where:</p><table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry>
<p>Option</p>
</entry>
<entry>
<p>Description</p>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<codeblock>-d &lt;directory&gt;</codeblock>
</entry>
<entry>
Source directory containing the custom rules attribute dictionary files to distribute. This is not required when run on an ME to distribute files that came from an SM.
</entry>
</row>
<row>
<entry>
<codeblock>-e &lt;MEs&gt;</codeblock>
</entry>
<entry>
Excludes the MEs (comma-separated OAME VIPs of MEs) from distribution. Only meaningful when run on SM.
</entry>
</row>
<row>
<entry>
<codeblock>-i &lt;MEs&gt;</codeblock>
</entry>
<entry>
Includes the MEs (comma-separated OAME VIPs of MEs) for distribution. Only meaningful when run on SM.
</entry>
</row>
<row>
<entry>
<codeblock>-h</codeblock>
</entry>
<entry>
Displays help for this tool.
</entry>
</row>
</tbody>
</tgroup>
</table><p>The command performs the following:</p><ul>
<li>
<p>Pushes the dictionary files to the SM application nodes in that SM site.</p>
</li>
<li>
<p>Reloads rules in all the SM app nodes.</p>
</li>
<li>
<p>Creates an archive of the dictionary files and pushes it to the Active OAME node on the ME sites.</p>
</li>
</ul></info></step>
<step><cmd>For the PCRFCustomRuleAttributeDictionary.xml file, ChargingCustomRuleAttributeDictionary.xml, diameter/rule/ChargingVsaToContextMapping.xml, diameter/rule/VsaToContextMapping.xml or RSCustomRuleAttributeDictionary.xml run the following command on each ME's Active OAME:</cmd><info><p>
<userinput>/opt/tpa/bin/distribute-rules-dictionaries</userinput>
</p><p>The command performs the following:</p><ul>
<li>
<p>Extracts the archive already transferred from the SM.</p>
</li>
<li>
<p>Pushes the dictionary files to the Diameter applications and Common Services nodes in the ME site.</p>
</li>
<li>
<p>Reloads the rules in all the applicable nodes.</p>
</li>
</ul></info></step>
</steps>
</taskbody></task>