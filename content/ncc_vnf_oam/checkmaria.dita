<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="id9YZ-09126-MT00-REZZA-SP2-checkmaria"><title>Procedure: Checking mariaDB and MaxScale</title><taskbody id="d1e66107"><context>
<sectiondiv>
<p>This procedure provides instructions on how to ensure that MariaDB and MaxScale are UP and running. If you are performing backup or restore of the IOHO nodes, or backup or restore of anentire VNF, then you must ensure that MariaDB and MaxScale are UP and running.</p>
</sectiondiv>
<note>
<p>The steps related to MaxScale apply only to SM or IG sites.</p>
</note></context>
<steps>
<step><cmd>Log in to any IOHO node. </cmd><info/></step>
<step><cmd>If this VNF is ME, go to the next step. Otherwise, enter:</cmd><info><codeblock>maxscale_adm --get-passive</codeblock><p>
<b>Expected outcome:</b>
</p><p>One IOHO node must be "off", and the others must be "on".</p></info></step>
<step><cmd>If this VNF is ME, go to the next step. Otherwise, enter:</cmd><info><codeblock>systemctl status app-maxscale</codeblock><p>
<b>Expected outcome:</b>
</p><p>app-maxscale service must be Active on all the IOHO nodes.</p></info></step>
<step><cmd>Enter:</cmd><info><codeblock>mariadb_adm --my-role</codeblock><p>
<b>Expected outcome:</b>
</p><p>One IOHO node must be "master", and the others must be "slave".</p></info></step>
<step><cmd>Enter:</cmd><info><codeblock>systemctl status app-mariadb</codeblock><p>
<b>Expected outcome:</b>
</p><p>app-mariadb service must be Active on all the IOHO nodes.</p></info></step>
<step><cmd>On CBAM check the “/var/log/cbam/workflows.log” and on the active OAME node check both the “/appdata/LCM/BR/BR_deploy.log” and the “/var/log/BR/BR.log” to check the backup result and records. The backup files are also saved under the same directory in the active OAME node. </cmd><info><p>If the backup_mode is “NONE”, each node’s backup data is backed up to the “/BACKUP” directory on the active OAME node after a successful backup. The backup log for each node is available on the active OAME at “/var/log/BR/BR.log”.</p><p>If the partition type is set to "NFS", all the backup data will be backed up to the dedicated repository of the NFS server.</p><p>If the backup_mode is NETBK and the backup is successful, the data are backed up on the NETBACKUP server and you will see the result from the “Active Monitor”. </p></info></step>
</steps>
</taskbody></task>