<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="id9yz-09126-mt00-rezza-sp2-metricsmode"><title>configure-metrics-mode tool</title><conbody>
<section><title>Description</title>
<p>This command is used to configure application metrics mode and can be run by the ‘tpaadmin’ user. The command resides in the /opt/tpa/bin directory. Once the value is changed, all of the applications need to be restarted, except for the database and the Auxiliary nodes. For the change to take effect, you must perform a restart on the Diameter, Common Services, IOHO, IOHD, OAME, and SM. </p>
<note>
<p>The NCC system can be configured to support both CSV and Prometheus when the metrics mode is CSV.
                    When the metrics mode is “csv”, NCC will collect metrics that are already coming
                    in CSV and the metrics that are already enabled for Prometheus.</p>
</note>
</section>
<section><title>Syntax</title>
<codeblock>configure-metrics-mode [-m &lt;metrics_mode&gt;] [-h] [-?]</codeblock>
<table>
<tgroup cols="2">
<colspec colname="col1"/>
<colspec colname="col2"/>
<thead>
<row>
<entry>
<p>
<b>Code</b>
</p>
</entry>
<entry>
<p>
<b>Description</b>
</p>
</entry>
</row>
</thead>
<tbody>
<row>
<entry>
<codeblock>No arguments</codeblock>
</entry>
<entry>
Displays usage/help information.
</entry>
</row>
<row>
<entry>
<codeblock>-h or -?</codeblock>
</entry>
<entry>
Displays usage/help information.
</entry>
</row>
<row>
<entry>
<codeblock>-m &lt;metrics_mode&gt;</codeblock>
</entry>
<entry>
Specifies the metrics mode in which the application must operate. The only supported metrics modes are ‘csv’ and ‘prometheus’, which are case-sensitive. After the value is updated, all applications must be re-started, except for the database and Auxiliary nodes.
</entry>
</row>
</tbody>
</tgroup>
</table>
</section>
<section><title>Example </title>
<p>To set the metrics mode as ‘csv’:</p>
<p>
<userinput>$ configure-metrics-mode -m csv</userinput>
</p>
<p>To set the metrics mode as ‘prometheus’:</p>
<p>
<userinput>$ configure-metrics-mode -m prometheus</userinput>
</p>
</section>
<section><title>Example output</title>
<p>Output similar to the following will appear when the mode is set successfully using this command:</p>
<p>
<systemoutput>SUCCESS: Successfully updated metrics mode in SDC.</systemoutput>
</p>
<p>If there is an error while updating the metrics mode, output similar to the following will appear:</p>
<p>
<systemoutput>ERROR: failed to set the metrics mode in SDC.</systemoutput>
</p>
<p>If you have entered a wrong or unsupported argument (for example, -k), output similar to the following will appear:</p>
<p>
<systemoutput>ERROR (SPS_SH_002): Unexpected option [-k]</systemoutput>
</p>
<p>
<systemoutput>This script is used to configure application metrics mode in SDC.</systemoutput>
</p>
</section>
</conbody></concept>