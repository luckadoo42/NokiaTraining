<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="id9yz-09126-ug01-pczza-sp1-supportacfeature"><title>Aggregation of usage in counters across subscription or bundle consumption using multi-bundle counters</title><conbody>
<section><title>Overview</title>
<p>NCC allows same data consumption to be applied to multiple counters and up to a single bucket
                across multiple subscriptions of a device. Counter with a scope as
                    <varname>MULTI-BUNDLE</varname> can be used to compute the usage across
                subscriptions of a device.</p>
<note>
<p>The aggregate usage cannot be applied to more than one bucket at the same time.</p>
</note>
<note>
<p>It is recommended to apply different threshold on a counter or bucket as per base bundle plan using the <uicontrol>SELECT COUNTER</uicontrol> or <uicontrol>SELECT BUCKET</uicontrol> option for a particular charging service; instead of using the <uicontrol>ADD BUCKET</uicontrol> or <uicontrol>ADD COUNTER</uicontrol> option.</p>
</note>
<p>This feature provides the following functionalities:</p><ul>
<li>
<p>Adding new bundles (in support of new plans) to accumulate the usage in parallel with keeping the existing bundle configurations intact (which means without modifying or redefining the pre-existing bundle configurations). This provides the flexibility to add new bundles or plans to interact with existing bundles that can be used in several other devices at the time of defining a new bundle.</p>
</li>
<li>
<p>Allowing the same bucket ID or counter ID to be included in multiple bundles. In case of unlimited data usage, the same counter ID or bucket ID can be used for different data base plans.</p>
</li>
<li>
<p>Applying different threshold on the same <i>Counter Definition ID</i> as per the bundle plan purchased, which refers to the threshold as per bundle plan.</p>
</li>
<li>
<p>Defining a bundle with number of renewals set to zero, so that the bundle expires and cannot be renewed when it reaches the <i>End Date</i> of the bundle, which can either be the BCR date of the subscriber account, or the end/renewal date of the periodic lifecycle in case the subscription has its own periodic lifecycle.</p>
</li>
<li>
<p>When multiple data boost subscriptions are purchased (with same charging service priority) having counter of <varname>MULTI-BUNDLE</varname> type, then the subscription purchased later has a higher priority for <varname>MULTI-BUNDLE</varname> counter.</p>
</li>
<li>
<p>Generating an EDR when a subscription expires and the number of remaining renewals is set as zero.</p>
<p>
<b>Note:</b> A lifecycle can be configured so that only a single expiration EDR is triggered, and it is possible to subsequently remove the subscriptions from the device and account. For example, by transitioning the subscription to a new state where it is subsequently deleted.</p>
</li>
</ul>
</section>
<section><title>Configuration</title>
<p>Follow the given steps to configure this feature:</p><ol>
<li><p>Create an RSV with <i>CALL_RULE_VARIABLES</i> trigger having two rule variables, for example,
                            <varname>CrossUpdate</varname> and <varname>Index</varname>.</p><p>Add
                        these two variables to the <i>COUNTER</i>, <i>TARIFF</i>, and
                            <i>APPLICABILITY</i> triggers as shown in the following figure:</p>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/Feature_config-triggers_default.png-->
                    <image
                        href="../images/img9yz-09126-ug01-pczza-sp1-feature_config-triggers_default.png"
                    />
                </li>
<li>
<p>Create a Threshold Profile Group (TPG) and cap for counters as specified in the following snapshots:</p><ul>
<li><p>50 GB for domestic base plan counter <varname>ABY</varname>:</p>
                            <!--MMO resource relative URI: ../Graphics/Release_20.3/TPG_Domestic_default.png-->
                            <image
                                href="../images/img9yz-09126-ug01-pczza-sp1-tpg_domestic_default.png"
                                scale="55"/>
                            <!--MMO resource relative URI: ../Graphics/Release_20.3/TPG_Domestic1_default.png-->
                            <image
                                href="../images/img9yz-09126-ug01-pczza-sp1-tpg_domestic1_default.png"
                            />
                        </li>
<li><p>15 GB for tethered base plan counter <varname>TBY</varname> for throttling:</p>
                            <!--MMO resource relative URI: ../Graphics/Release_20.3/TPG_tethered_for_TBY_default.png-->
                            <image
                                href="../images/img9yz-09126-ug01-pczza-sp1-tpg_tethered_for_tby_default.png"
                                scale="55"/>
                            <!--MMO resource relative URI: ../Graphics/Release_20.3/TPG_tethered_for_TBY1_default.png-->
                            <image
                                href="../images/img9yz-09126-ug01-pczza-sp1-tpg_tethered_for_tby1_default.png"
                            />
                        </li>
<li><p>10 GB hard-stop for domestic data-boost counter <varname>ABB</varname>:</p>
                            <!--MMO resource relative URI: ../Graphics/Release_20.3/Cap_for_ABB_default.png-->
                            <image
                                href="../images/img9yz-09126-ug01-pczza-sp1-cap_for_abb_default.png"
                                scale="55"/>
                            <!--MMO resource relative URI: ../Graphics/Release_20.3/Cap_for_ABB1_default.png-->
                            <image
                                href="../images/img9yz-09126-ug01-pczza-sp1-cap_for_abb1_default.png"
                                scale="55"/>
                        </li>
</ul>
</li>
<li><p>Create two multi-bundle counters <varname>ABY</varname> and <varname>ABB</varname>, and one
                        subscription counter <varname>TBY</varname> as specified in the following
                        snapshots:</p><p>
                        <b>ABY counter:</b>
                    </p>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/Counter_ABY_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-counter_aby_default.png"/>
                    <p>
                        <b>TBY counter:</b>
                    </p>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/Counter_TBY_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-counter_tby_default.png"/>
                    <p>
                        <b>ABB counter:</b>
                    </p>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/Counter_ABB_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-counter_abb_default.png"/>
                </li>
<li><p>Create three charging services; one for domestic base plan, second for tethered base plan,
                        and the third for domestic data-boost as specified in the following
                        snapshots:</p><p>
                        <b>Charging service for ABY:</b>
                    </p>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/CS_ABY_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-cs_aby_default.png"
                        scale="50"/>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/CS_ABY2_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-cs_aby2_default.png"
                        scale="55"/>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/CS_ABY3_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-cs_aby3_default.png"/>
                    <p>
                        <b>Charging service for TBY:</b>
                    </p>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/CS_TBY_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-cs_tby_default.png"
                        scale="50"/>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/CS_TBY2_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-cs_tby2_default.png"
                        scale="65"/>
                    <p>
                        <b>Charging service for ABB:</b></p>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/CS_ABB_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-cs_abb_default.png"
                        scale="50"/>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/CS_ABB2_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-cs_abb2_default.png"
                        scale="50"/>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/CS_ABB3_default.png-->
                    <image href="../images/img9yz-09126-ug01-pczza-sp1-cs_abb3_default.png"
                        scale="60"/>
                    <p>
                        <b>NOTE:</b> Set the priority of data-boost charging service higher than the
                        base plan charging services.</p>
                </li>
<li><p>Create two bundles <varname>DoMoreUnlimited</varname> and
                            <varname>Domestic-data-boost</varname> as shown in the following figure: </p><p>
                        <b>Do More Unlimited bundle</b>
                    </p>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/Do_More_Unlimited_bundle_default.png-->
                    <image
                        href="../images/img9yz-09126-ug01-pczza-sp1-do_more_unlimited_bundle_default.png"
                        scale="50"/>
                    <p>
                        <b>Data-boost domestic bundle</b>
                    </p>
                    <!--MMO resource relative URI: ../Graphics/Release_20.3/Data-boost_domestic_bundle_default.png-->
                    <image
                        href="../images/img9yz-09126-ug01-pczza-sp1-data-boost_domestic_bundle_default.png"
                        scale="50"/>
                </li>
</ol>
</section>
<section><title>Limitations</title>
<p>This feature has the following limitations:</p><ul>
<li>
<p>The aggregated view of <i>Counter</i> type does not have the option of accumulating multi-bundle counters.</p>
</li>
<li>
<p>This feature is limited only for device subscriptions, which means applying multi-bundle counters for device subscriptions.</p>
</li>
</ul>
</section>
<section><title>Examples</title>
<p>The following examples give a better understanding about this functionality:</p>
<sectiondiv>
<p><b>Example 1: Correct counters are incremented for tethered usage when two data-boosters are subscribed during a call for tethered usage and “Do More Unlimited” bundle usage is throttled</b></p>
<p>
<b>Provisioning:</b>
</p><ol>
<li><p>There is a <varname>Do More Unlimited</varname> bundle, which has two charging services; one
                            for the tethered data and the other one for non-tethered data with
                                <varname>NO CHARGE</varname> configuration applied to both the
                            charging services.</p><p>
                            <b>Figure: Tariff formula of charging service for non-tethering data</b>
                        </p>
                        <!--MMO resource relative URI: ../Graphics/Release_20.3/Tariff_formula_for_non-tethering_CS_default.png-->
                        <image
                            href="../images/img9yz-09126-ug01-pczza-sp1-tariff_formula_for_non-tethering_cs_default.png"
                            scale="55"/>
                        <p/><p>
                            <b>Figure: Tariff formula of charging service for tethering data</b>
                        </p>
                        <!--MMO resource relative URI: ../Graphics/Release_20.3/Tariff_formula_of_CS_for_tethering_data_default.png-->
                        <image
                            href="../images/img9yz-09126-ug01-pczza-sp1-tariff_formula_of_cs_for_tethering_data_default.png"
                            scale="65"/>
                    </li>
<li>
<p>There are the following two counters for the <varname>Do More Unlimited</varname> bundle:</p><ul>
<li><p>
                                    <i>Multi-bundle</i> type counter named as
                                    <varname>ABY</varname>, which accumulates both domestic and
                                    tethered consumption.</p>
                                <!--MMO resource relative URI: ../Graphics/Release_20.3/Support_AC_multi-bundle_default.png-->
                                <image
                                    href="../images/img9yz-09126-ug01-pczza-sp1-support_ac_multi-bundle_default.png"
                                    scale="65"/>
                            </li>
<li><p>
                                    <i>Subscription</i> type counter named as
                                    <varname>TBY</varname>, which accumulates only tethered
                                    consumption and has an <i>Applicability Condition</i> of
                                        <userinput>RG = 3303</userinput> (tethered consumption).</p>
                                <!--MMO resource relative URI: ../Graphics/Release_20.3/Support_AC_Subscription_counter_default.png-->
                                <image
                                    href="../images/img9yz-09126-ug01-pczza-sp1-support_ac_subscription_counter_default.png"
                                />
                            </li>
</ul>
</li>
<li>
<p>The <varname>TBY</varname> counter has a threshold to throttle (<systemoutput>SNR=low</systemoutput>) speed after 15 GB usage.</p>
</li>
<li>
<p>The <varname>ABY</varname> counter has a threshold to throttle (<systemoutput>SNR=low</systemoutput>) speed after 50 GB usage.</p>
</li>
<li><p>A non-renewable data-booster bundle of 5 GB (bucket <varname>TBB</varname>) is created for
                            tethered consumption (having charging service with <i>Applicability
                                Condition</i> of <userinput>RG = 3303</userinput>).</p><p>
                            <b>Figure: Tethered data-boost bucket</b>
                        </p>
                        <!--MMO resource relative URI: ../Graphics/Release_20.3/Tethered_data_boost_bucket_default.png-->
                        <image
                            href="../images/img9yz-09126-ug01-pczza-sp1-tethered_data_boost_bucket_default.png"
                            scale="45"/>
                        <p/><p>
                            <b>Figure: Tethered data-boost charging service</b>
                        </p>
                        <!--MMO resource relative URI: ../Graphics/Release_20.3/Tethered_data_boost_charging_service_default.png-->
                        <image
                            href="../images/img9yz-09126-ug01-pczza-sp1-tethered_data_boost_charging_service_default.png"
                            scale="45"/>
                        <p/><p>
                            <b>Figure: Tethered data-boost bundle</b>
                        </p>
                        <!--MMO resource relative URI: ../Graphics/Release_20.3/Tethered_data_boost_bundle_default.png-->
                        <image
                            href="../images/img9yz-09126-ug01-pczza-sp1-tethered_data_boost_bundle_default.png"
                            scale="45"/>
                    </li>
</ol>
<p>
<b>Result:</b>
</p><ul>
<li><p>When a call is executed from 3303, data consumption is applied from the <varname>Do More
                                Unlimited</varname> bundle. Once the consumption is 15 GB, an SNR is
                            triggered and the <varname>TBY</varname> state becomes low.</p>
                        <!--MMO resource relative URI: ../Graphics/Release_20.3/Support_AC_case1_img1_default.png-->
                        <image
                            href="../images/img9yz-09126-ug01-pczza-sp1-support_ac_case1_img1_default.png"
                            scale="50"/>
                    </li>
<li><p>Suppose a user subscribes a data-boost bundle for tethered consumption of 5 GB and after 3 GB
                            of data consumption from the data-boost bundle, the user subscribes to
                            another data-boost bundle.</p><p>
                            <b>Figure: Device overview after the data-boost bundle is purchased</b>
                        </p>
                        <!--MMO resource relative URI: ../Graphics/Release_20.3/Support_AC_case1_img2_default.png-->
                        <image
                            href="../images/img9yz-09126-ug01-pczza-sp1-support_ac_case1_img2_default.png"
                            scale="50"/>
                    </li>
<li>
<p>After consuming two more GBs, next reservation is from the second data-boost bundle until it is exhausted.</p>
</li>
<li>
<p>After exhausting both the data-boosters, charging is again done from the <varname>Do More Unlimited</varname> bundle.</p>
</li>
<li>
<p>When the <varname>ABY</varname> threshold reaches 50 GB, an SNR is triggered for the <varname>ABY</varname> counter as well.</p>
</li>
</ul>
</sectiondiv>
<sectiondiv>
<p><b>Example 2: Purchase additional domestic data usage booster plan</b></p>
<p>In this example, a new domestic data-boost bundle is made available to a subscriber's existing base unlimited plan, such as <varname>Start Unlimited</varname>, <varname>Do More Unlimited</varname>, or <varname>Get More Unlimited</varname> without modifying their existing data base plans.</p>
<p>
<b>Provisioning:</b>
</p><ol>
<li>
<p>Define a <varname>Do More Unlimited</varname> bundle with two charging services:</p><ul>
<li>
<p>
<varname>Domestic CS</varname> for domestic data with domestic data counter <varname>ABB</varname>, which is a multi-bundle type counter.</p>
</li>
<li>
<p>
<varname>Tethered CS</varname> for tethered data with tethered counter <varname>TBY</varname>, which is a subscription type counter.</p>
</li>
</ul>
</li>
<li>
<p>Create two rule variables:</p><ul>
<li>
<p>
<varname>CrossUpdate</varname>: This variable updates the data consumption across bundle in a specific multi-bundle counter. When this variable is set as TRUE, then the highest priority multi-bundle counter is to be updated with DIFFERENT counting conditions. This variable is usable for multi-bundle counter and bucket in tariff.</p>
</li>
<li>
<p>
<varname>Index</varname>: This variable allows a multi-bundle counter across update in case of SAME counting conditions. It is usable only for multi-bundle counter.</p>
</li>
</ul>
</li>
<li>
<p>Applicability condition of <varname>ABB</varname> counter:</p>
<p>
<varname>Index</varname> = Base bundle or <varname>CrossUpdate</varname> = True</p>
</li>
</ol>
<p>
<b>Result:</b>
</p><ul>
<li>
<p>The new domestic data-boost bundle can be added to a device, which already has an unlimited data plan, with or without having purchased a tethered data-boost bundle.</p>
</li>
<li><p>The tethered data-boost bundle has the following details:</p>
                        <!--MMO resource relative URI: ../Graphics/Release_20.3/Tethered_data_boost_bundle_details_default.png-->
                        <image
                            href="../images/img9yz-09126-ug01-pczza-sp1-tethered_data_boost_bundle_details_default.png"
                        />
                    </li>
</ul>
</sectiondiv>
</section>
</conbody></concept>