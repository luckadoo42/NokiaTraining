<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="rule_var_rule_sys_ver_prov">
    <title>Rule, variable, and rule system version provisioning</title>
    
    <conbody>
        <section id="section_qnd_zmh_plb">
            <title>Rule authoring management</title>
            <p>Within an NCC site there is one active rule system at any given time, which contains
                the rules and variables that are currently in effect. The NCC allows the creation of
                multiple rule system versions to support having rule systems for different purposes,
                such as in a lab where different scenarios are being explored, and to maintain
                previous versions of rule systems as they evolve.<note>If an RSV is more than 5MB in
                    size, it is not possible to perform an export of the RSV using a Chrome browser.
                    This is a limitation of the browser. Nokia suggests that the Mozilla Firefox
                    browser is used for an operation of this magnitude. To do so, the default
                    setting in Mozilla Firefox must be changed as follows:<ul id="ul_c2l_bnh_plb">
                        <li>Navigate to “about:config” in the Firefox address bar.</li>
                        <li>Search for “dom.storage.default_quota”, which is set to 5120 by
                            default.</li>
                        <li>Set the value to 7000 (to export an RSV of 7MB) or an appropriate size
                            that is higher to be able to export the RSV.</li>
                    </ul></note></p>
            <p>The NCC supports a drag and drop editing tree that can be used to associate triggers
                with one or more rule groups. Triggers are a message type such as Gx CCR or Gy CCA,
                or AF establishment. Rules and rule variables can be configured using the rule text
                editors or by importing an existing rule system version. Rule groups may be
                re-ordered within a trigger or re-order rules within a rule group by dragging the
                rules up or down. The following options are available to manage an RSV:<ul
                    id="ul_pbt_wb3_plb">
                    <li>
                        <p>Edit</p>
                        <p>Available when the RSV is in a Draft state. If the RSV is in a Release
                            state, it may be reverted to Draft if it has not been distributed to an
                            ME.</p>
                    </li>
                    <li>
                        <p>Delete</p>
                        <p>Available when the RSV is in a Draft state. If the RSV is in a Release
                            state, it may be reverted to Draft if it has not been distributed to an
                            ME.</p>
                    </li>
                    <li>
                        <p>Import</p>
                        <p>To Import Rule Group, tap Add Rule Group, then tap the IMPORT button in
                            the Rule Group window. Add a name for the rule group and browse to find
                            the file to import. </p>
                        <p>To reference an existing Rule Group in a different Trigger, select a new
                            Trigger, tap the Add Rule Group button, then tap the REFRENCE RULE GROUP
                            button. Select the name of the rule group and add the new trigger.</p>
                    </li>
                    <li>
                        <p>Export</p>
                        <p>Export is supported using the export button that appears in the RSV table
                            when the cursor is hovered over a line item in the table. The name of
                            the file being imported in this release cannot be changed.</p>
                    </li>
                    <li>
                        <p>Clone</p>
                        <p>Clone is supported using the Clone button that appears in the RSV table
                            when the cursor is hovered over a line item in the table. The name of
                            the file being cloned in this release cannot be changed.</p>
                    </li>
                    <li>
                        <p>Distribute to an ME</p>
                        <p>The Release version of the RSV is the one that must be distributed to all
                            of the MEs in a Geo-cluster. There is also a SUMMARY button in the Rule
                            Configuration tab. This button opens the RSVs Distribution Status On MEs
                            pop-up that displays lists of ME names, showing the statuses of their
                            associated Activate lists and Distribution lists for Policy or Charging
                            applications.</p>
                    </li>
                    <li>
                        <p>Activate on the ME</p>
                        <p>After the Release version of the RSV has been distributed, it must be
                            activated.</p>
                    </li>
                </ul></p>
            <p>When the Rules and Variables tab of Policy or the Diameter Rules tab of Diameter
                Configuration in the SM is opened, a configurable rule system version form is
                presented. The Charging application allows the configuration of Variables only as
                the charging rules are configured in the Charging profiles.</p>
            <p>When the Rule and Variables tab of Policy or the Diameter Rules tab of Diameter
                Configuration in the SM is opened, there is a filter that allows the searching for
                any specific RSV by name, state, and last time stamp. Directly under the filter, a
                list of all RSVs in the application are displayed if the filter has not been used,
                or a list of all RSVs are displayed which have used the filter.</p>
            <p>Included in this form, is a button that will allow the searching for, exportation,
                and importation of an RSV, as well as a button that will allow the addition and
                configuration of a new RSV.</p>
            <p>To create a new RSV, one must:<ol id="ol_ns4_3c3_plb">
                    <li>Provide a name for the RSV.</li>
                    <li>Provide an application name.</li>
                    <li>New RSVs are in the draft state automatically; if an RSV must be edited,
                        ensure the RSV is in a draft state. After it is created, the RSV may be
                        edited to change the state to release, and distribute it to the MEs.</li>
                    <li>Optionally, provide a description.</li>
                    <li>Optionally, provide a security domain.</li>
                    <li>Save and Continue.</li>
                </ol></p>
            <p>When Save and Continue is selected on this form, a rules text editor is presented
                where the triggers, rule groups, or rule variables required for the rules in the new
                rule system can be selected.</p>
            <p>The SPS-Charging rules text editor presents triggers and rule variables only.</p>
            <p>The Diameter Rules text editor presents triggers and rule groups only.</p>
            <p>The trigger must always be selected before carrying on to the rule groups or rule
                variables configuration forms to populate the Triggers parameter in each of those
                forms.</p>
            <p>The Rules System Version List page provides a list of all the RSVs available as well
                as an ADD button that can be used to add a new draft version RSV. The Rules System
                Version form that opens requires the parameters as shown in the following table to
                be filled in.<table frame="all" rowsep="1" colsep="1" id="table_bwv_nc3_plb">
                    <tgroup cols="3">
                        <colspec colname="c1" colnum="1" colwidth="1*"/>
                        <colspec colname="c2" colnum="2" colwidth="1*"/>
                        <colspec colname="c3" colnum="3" colwidth="1*"/>
                        <thead>
                            <row>
                                <entry>Parameter</entry>
                                <entry>Description</entry>
                                <entry>Options</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>Name</entry>
                                <entry>The name of the RSV in SPS-Charging or SPS-Policy
                                    applications.</entry>
                                <entry>Must be a unique name in the rule system version and it is
                                    mandatory. Up to 50 characters only.</entry>
                            </row>
                            <row>
                                <entry>State</entry>
                                <entry>The state of the RSV.</entry>
                                <entry>Draft, Release, or Active</entry>
                            </row>
                            <row>
                                <entry>Application</entry>
                                <entry>The application of the RSV required.</entry>
                                <entry>
                                    <p>Policy</p>
                                    <p>Charging</p>
                                    <p>Diameter</p>
                                </entry>
                            </row>
                            <row>
                                <entry>Security Domain</entry>
                                <entry>Select the user types that can see the peer records from the
                                    drop-down list in SPS-Charging or SPS-Policy applications. If no
                                    value is specified, the records are public</entry>
                                <entry>—</entry>
                            </row>
                            <row>
                                <entry>Description</entry>
                                <entry>Enter an optional description of the rule system version in
                                    SPS-Charging or SPS-Policy applications.</entry>
                                <entry>—</entry>
                            </row>
                            <row>
                                <entry>Trigger</entry>
                                <entry>Allows selection of a rule set as per the application in
                                    SPS-Charging and SPS-Policy applications.</entry>
                                <entry>Depending on the application, selection of the Trigger (Rule
                                    Set) can be made from a list of charging triggers or from a list
                                    of policy triggers.</entry>
                            </row>
                            <row>
                                <entry>Rule Groups</entry>
                                <entry>
                                    <p>Allows the addition and configuration of rules in the rule
                                        groups in SPS-Policy applications.</p>
                                    <p>Allows the selection and editing of existing rules in the
                                        rule group.</p>
                                    <p>Contains an Add New Rule button, if more rules are
                                        required.</p>
                                </entry>
                                <entry>
                                    <p>Rule Group name</p>
                                    <p>Specify if top level rule group</p>
                                    <p>Rule name</p>
                                    <p>Rule logic (if /then statement)</p>
                                </entry>
                            </row>
                            <row>
                                <entry>Rule Variables</entry>
                                <entry>Allows the addition of rule variables, or selection and
                                    editing of existing rule variables in SPS-Charging and
                                    SPS-Policy applications.</entry>
                                <entry>Add and configure a rule variable.</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table></p>
            <note>
                <p>There are search filters above the Trigger, Rule Group, and Rule Variables
                    configuration menus that allow the searching for the names of required Triggers,
                    Rule Groups, and Rule Variables as shown in the following figure.</p>
            </note>
        </section>
    </conbody>
</concept>
