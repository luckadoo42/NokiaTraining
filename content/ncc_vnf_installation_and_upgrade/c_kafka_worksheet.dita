<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
		<concept id="id9YZ-09018-IN00-RJZZA-Kafka_worksheet"><title>Kafka section</title><conbody id="Kafka_worksheet">

<p>The Kafka section is used for the settings related to Kafka. The following table describes the parameters of the Kafka section.</p>
<note>Do not remove the parameters.</note>
<table pgwide="1" rowsep="1" colsep="1" scale="80">
            <title>Kafka parameters descriptions</title>
            <tgroup cols="3">
                <colspec colname="col1"/>
                <colspec colname="COLSPEC23"/>
                <colspec colname="COLSPEC1"/>
                <thead>
                    <row>
                        <entry> Parameter </entry>
                        <entry> Description </entry>
                        <entry> Update notes </entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>kafka/kafka_reserved_broker_max_id </entry>
                        <entry> This parameter defines the maximum number that can be used for a
                            broker ID. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_delete_topic_enable </entry>
                        <entry>
                            <p>This is a switch to enable topic deletion.</p>
                            <p>The values are true or false.</p>
                            <p>The values of true and false are case sensitive and must be in
                                lowercase.</p>
                        </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_rack_enable </entry>
                        <entry>
                            <p>This is a switch to enable Kafka rack-awareness.</p>
                            <p>Although the supported values are true and false, this parameter must
                                always be set to true.</p>
                        </entry>
                        <entry> Do not modify. </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_enable_clog</entry>
                        <entry>This parameter describes whether the clog property is enabled or
                            disabled for the kafka logs.<p>The values are true or false.</p><p>One
                                of the clog feature provides harmonized logging to make logs more
                                meaningful and easier to use.</p></entry>
                        <entry>N/A</entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_broker_port </entry>
                        <entry> This parameter defines the port that the socket server listens to. </entry>
                        <entry> Do not modify. </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_num_network_threads </entry>
                        <entry> This parameter defines the number of threads handling network
                            requests. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_num_io_threads </entry>
                        <entry> This parameter defines the number of threads handling disk I/O. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_socket_send_buffer_bytes </entry>
                        <entry> This parameter defines the size of the send buffer used by the
                            socket server. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_socket_receive_buffer_bytes </entry>
                        <entry> This parameter defines the size of the receive buffer used by the
                            socket server. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_socket_request_max_bytes </entry>
                        <entry> This parameter defines the maximum size of a request that the socket
                            server accepts (protection against OOM). </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_datavolume </entry>
                        <entry>
                            <p>This is a comma separated list of directories for storing log
                                files.</p>
                            <p>Ensure that there is sufficient disk space for comsvc_kafka_volume
                                and smapp_kafka_valume where Kafka data is stored. All VM sizing is
                                done prior to instantiation and there is no re-sizing. Prior to
                                instantiation, see the NCC Dimensioning and Engineering Guidelines
                                for dimensioning information and the NCC VNF Artifacts Generator
                                Tool Guide for instructions on how to set an appropriate size. </p>
                        </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_num_partitions </entry>
                        <entry> This parameter defines the number of log partitions per topic. More
                            partitions allow greater parallelism for consumption, but this results
                            in more files across the brokers. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_num_recovery_threads_per_data_dir </entry>
                        <entry> This parameter defines the number of threads per data directory for
                            log recovery at startup and flushing at shutdown. It is recommended to
                            increase this value for installations with data dirs located in RAID
                            array. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_log_retention_hours </entry>
                        <entry> This parameter defines the minimum age of a log file to be eligible
                            for deletion. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_log_retention_minutes </entry>
                        <entry> This parameter defines the number of minutes to keep a log file
                            before deleting it. If this is not set, the value in
                            &lt;kafka/kafka_log_retention_hours&gt; is used. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_log_retention_bytes </entry>
                        <entry>
                            <p>This parameter controls the maximum size that a partition, which
                                consists of log segments, can grow to before we discard old log
                                segments to free space.</p>
                            <p>Deletion always starts from the end of a log.</p>
                        </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_log_segment_bytes </entry>
                        <entry> This parameter defines the maximum size of a log segment file. When
                            this size is reached, a new log segment is created. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry> kafka/kafka_log_retention_check_interval_ms </entry>
                        <entry> This parameter defines the interval for checking log segments
                            whether these log segments should be deleted or not according to the
                            retention criteria. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_package_name</entry>
                        <entry>This parameter defines the confluent kafka <b>RPM</b> package name
                            that is installed in the Kafka nodes.</entry>
                        <entry>N/A</entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_zk_port </entry>
                        <entry> This is the ZooKeeper port that Kafka connects to. </entry>
                        <entry> Do not modify. </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_zk_connection_timeout_ms </entry>
                        <entry> This parameter defines the timeout in ms for connecting to
                            ZooKeeper. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_message_max_bytes </entry>
                        <entry>
                            <p>This parameter defines the largest record batch size allowed by
                                Kafka. If this size is increased and there are consumers older than
                                0.10.2, then these consumers' fetch size must also be increased.</p>
                            <p>In the latest message format version, records are grouped into
                                batches for efficiency. In previous message format versions,
                                uncompressed records are not grouped into batches This limit only
                                applies to a single record.</p>
                        </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_replica_fetch_max_bytes </entry>
                        <entry> This parameter defines the number of bytes of messages to attempt to
                            fetch for each partition. This is not the absolute maximum. If the first
                            record batch in the first non-empty partition of the fetch is larger
                            than this value, the record batch is still returned to ensure that
                            progress can be made. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_default_replication_factor </entry>
                        <entry> This parameter defines the default replication factors for
                            automatically created topics. </entry>
                        <entry> Do not modify. </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_offsets_topic_replication_factor </entry>
                        <entry> This parameter defines the replication factor for the offsets topic.
                            This is set higher to ensure availability. Internal topic creation fails
                            until the cluster size meets this replication factor requirement. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_log_dirs </entry>
                        <entry>
                            <p>This is the debug log directory for Kafka.</p>
                            <p>Ensure that there is sufficient disk space for comsvc_log_volume and
                                smapp_log_volume where the log is stored. All VM sizing is done
                                prior to instantiation and there is no re-sizing. Prior to
                                instantiation, see the NCC Dimensioning and Engineering Guidelines
                                for dimensioning information and the NCC VNF Artifacts Generator
                                Tool Guide for instructions on how to set an appropriate size. </p>
                        </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_update_configuration </entry>
                        <entry>
                            <p>This parameter indicates whether Kafka configuration can be updated
                                by “update configuration” LCM.</p>
                            <p>The values are true or false.</p>
                            <p>The values of true and false are case sensitive and must be in
                                lowercase.</p>
                        </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_log_save_enable </entry>
                        <entry>
                            <p>This parameter defines whether to back up and recover a log file or
                                not for NCC upgrade and backout.</p>
                            <p>The values are true or false.</p>
                            <p>The values of true and false are case sensitive and must be in
                                lowercase.</p>
                        </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_mount_disk </entry>
                        <entry>
                            <p>This parameter defines whether to mount external storage for log
                                files or not.</p>
                            <p>The values are true or false.</p>
                            <p>The values of true and false are case sensitive and must be in
                                lowercase.</p>
                        </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_heap </entry>
                        <entry> This is a JVM parameter to start Kafka. </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_broker_groupname </entry>
                        <entry>
                            <p>This parameter identifies Kafka broker name which is required for
                                scaling operations.</p>
                            <p>For ME and IG, the value is vdu-COMSVC, For ME, the value is
                                vdu-SMApp.</p>
                        </entry>
                        <entry> N/A </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_reassign_partitions_throttle_Bps </entry>
                        <entry>
                            <p>This defines the bandwidth assigned with the partition reassignment
                                operation. This partition reassignment operation is triggered when
                                the VMs that host Kafka server are scaled-in or scaled-out.</p>
                            <p>Nokia recommends to set this parameter to 50% of the total bandwidth
                                between the two VMs hosting Kafka server.</p>
                            <p>The higher the bandwidth allocation is, the faster the reassignment
                                operation completes.</p>
                        </entry>
                        <entry> To modify the default value, use configure-kafka-partition-keys
                            tool. For information on the tool, see the Operation, Administration and
                            Maintenance Guide. </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_enable_scale_reassign_partition </entry>
                        <entry>
                            <p>This parameter defines whether or not during a scaling operation
                                kafka_reassign_partition tool executes automatically.</p>
                            <p>However, the values are true or false, Nokia recommends to set this
                                parameter to true.</p>
                            <p>If it occurs that this parameter is set to false, use
                                configure-kafka-partition-keys tool to set this parameter to true.
                                For information on the tool, see the Operation, Administration and
                                Maintenance Guide.</p>
                        </entry>
                        <entry> Do not modify. </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_repartition_delay_second </entry>
                        <entry> This parameter defines how often to check whether or not a Kafka
                            scaling (scale-out or scale-in) operation has completed. </entry>
                        <entry> Do not modify. </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_repartition_retries_count </entry>
                        <entry> This parameter defines the maximum time for Kafka scale-out and
                            scale-in operations. If a scaling operation finishes before this time,
                            (a check is done after every &lt;kafka_repartition_delay_second&gt;),
                            then it will end the operation . If it does not complete in time, then
                            kafka partition reassignment is still running. In this case, verify the
                            reassignment script to complete before running any other action on the
                            node" log will be printed. Manually, we have to check status of
                            partition before executing any other operation. </entry>
                        <entry> Do not modify. </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_to_load_rpm_version </entry>
                        <entry>
                            <p>This parameter is used if Kafka is upgraded.</p>
                            <p>In case of the upgrade operation where FROM_load version is greater
                                than TO_load version, this parameter has to be set to rpm version of
                                Kafka corresponding to TO_load before performing upgrade as well as
                                in the sdc_update_conf of TO_load. </p>
                            <p>For example, if there is an upgrade from 2.0.1(FROM_load kafka
                                version) to 1.1.0 (TO_load kafka version), then this parameter must
                                be set to "1.1.0" before performing upgrade (i.e. in 2.0.1 load) as
                                well as in the sdc_update_conf of 1.1.0 load.</p>
                        </entry>
                        <entry> Do not modify. </entry>
                    </row>
                    <row>
                        <entry>kafka/backout_incompatible_kafka_version </entry>
                        <entry>
                            <p>This parameter is used if Kafka is upgraded.</p>
                            <p>Once Kafka version is upgraded to 2.1.x load, it is not possible to
                                downgrade Kafka. A generic provision is provided by setting
                                "kafka/backout_incompatible_kafka_version" to "2.1" as the default
                                value. If a later version becomes also downgrade incompatible, then
                                this parameter has to be set to that later Kafka version before
                                performing kafka upgrade as well as in the sdc_update_conf of new
                                load.</p>
                        </entry>
                        <entry> Modify if needed. </entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_systemvolume</entry>
                        <entry>
                            <p>This parameter is used to store the upgrade flags and backup during
                                upgrades.</p>
                            <p>Allowed values: /appdata</p>
                        </entry>
                        <entry>Do not modify</entry>
                    </row>
                    <row rowsep="0">
                        <entry>kafka/kafka_vol_label</entry>
                        <entry>This parameter is used to map label name for Kafka volumes when
                            mounting using /dev/disk/by-id/. This should be same as "user_label" for
                            Volume for smapp nodes in SM type of deployment and COMSVC in IG/ME type
                            of deployment. For details, see VNF Artifacts Generator Tool User Guide,
                                <b>Node Group -> Volume tab and Independent Disk tab</b> section. </entry>
                        <entry>Do not modify</entry>
                    </row>
                    <row>
                        <entry>kafka/kafka_vol_label<p>(continued)</p></entry>
                        <entry>
                            <p>Allowed values:<ul id="ul_a4q_gq1_4mb">
                                    <li>"comsvc_kafka_volume" for IG/ME deployments</li>
                                    <li>"smapp_kafka_volume" for SM deployments</li>
                                </ul></p>
                        </entry>
                        <entry/>
                    </row>
                </tbody>
            </tgroup>
        </table>
</conbody></concept>