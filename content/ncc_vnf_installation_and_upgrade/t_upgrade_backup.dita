<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
		<task id="id9YZ-09018-IN00-RJZZA-Upgrade-backup"><title>Backing out a VNF during SU</title><taskbody id="d1e11074"><context><sectiondiv>
				<p><b>Overview</b></p>
				<p>This procedure provides instructions on how to back out a VNF during the SU. This
					procedure recovers the VNF and brings it back to the state in which it was
					before the upgrade. This procedure includes a DB rollback from the TO load
					version back to the FROM load version.</p>
			</sectiondiv><sectiondiv><b>Before you begin:</b></sectiondiv><p>Before beginning this
				procedure, since a backout might occur in various scenarios, contact Nokia
				Professional Services to determine the backout strategy.</p>To back out the
			upgrade:</context><steps>

<step><cmd>Ensure that the persisted version is set to the FROM load version. If the persisted version has been set to the TO load version, update the persisted version to the FROM load value using the procedure <!--xref URI: t-upgrade-inservice-updating-persisted-version.xml#Updating-persisted-version--><xref keyref="id9YZ-09018-IN00-RJZZA-Updating-persisted-version"/>
</cmd><info/></step>
<step><cmd>As root user, log in to the Active OAME VM.</cmd><info/></step>
<step><cmd>Run the audit tool by entering:</cmd><info><p>
<codeph>/opt/tpa/bin/db-audit-idle-records</codeph>
</p></info></step>
<step><cmd>If you are backing out an ME or IG site, set the ME version to the FROM load version using the procedure <!--xref URI: t-upgrade-inservice-updating-ME-version-in-GUI.xml#setting-ME-version--><xref keyref="id9YZ-09018-IN00-RJZZA-setting-ME-version"/>.</cmd><info/></step>
<step><cmd>Based on the audit results, if needed, execute the backout TaskList using pAutoSU as follows:</cmd><info><ul>

<li>
<p>Perform one of the following:</p><ul>

<li>
<p>For VMware, enter:</p>
<p>
<codeph>cd $AUTO_HOME</codeph>
</p>
</li>
<li>
<p>For OpenStack, enter:</p>
<p>
<codeph>cd $AUTO_HOME</codeph>
</p>
<p>
<codeph>source &lt;PROJECT&gt;-openrc.sh</codeph>
</p>
</li>
</ul>
</li>
<li>
<p>Enter:</p>
<p>
<codeph>./autoSU.py -f tools/genTaskList/&lt;tasklist-backout-file&gt;</codeph>
</p>
<p>The tool (with the <i>tasklist-backout.txt</i>, or one of the single
									group<i>tasklist-backout-group&lt;#&gt;.txt</i> files) will
								detect and apply the patch that existed in the NCC before the ISU as
								the backout runs.</p>
<p>The &lt;tasklist-backout-file&gt; parameter can be one of the following as generated by the genTaskList script:</p><ul>

<li>
<p>tasklist-backout.txt - used in the above command for rolling back all VMs in one attempt but allowing only the upgraded VMs to be rolled back.</p>
</li>
<li>
<p>tasklist-backout-group1.txt: this file is used in the above command to do a backout for group1 only</p>
</li>
<li>
<p>tasklist-backout-group2.txt: this file is used in the above command to do a backout for group2 only</p>
</li>
<li>
<p>tasklist-backout-group3.txt: this file is used in the above command to do a backout for group3 only</p>
</li>
</ul>
</li>
</ul><note>

<p>For information about TaskList, see <!--xref URI: t-upgrade-task-list-file.xml#TaskList-specification--><xref keyref="id9YZ-09018-IN00-RJZZA-TaskList-specification"/>.</p>
</note></info></step>
</steps>
</taskbody></task>