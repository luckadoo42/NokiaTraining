<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="id9YZ-08540-UG02-PCZZA-d1e26500_request_and_response_format">
   <title>Request and response format</title>
   <conbody>
      <p>The request is in <varname>application/xml</varname> format. The response is in
            <varname>text/plain</varname> format.</p>
      <section>
         <p>
            <b>Sample request</b>
         </p>
         <p>The request is in <varname>application/xml</varname> format. Following is an example of
            a request for an email notification. This format also applies to all the channel
            types.</p>
         <fig>
            <codeblock>&lt;ext:entities xmlns:ext="externalNotificationSPS"&gt;
	&lt;entity&gt;
		&lt;id&gt;Test&lt;/id&gt;
		&lt;type&gt;Device&lt;/type&gt;
		&lt;templateId&gt;BACK_OFFICE_REST&lt;/templateId&gt;
		&lt;templateParameters&gt;
			&lt;templateParameter&gt;
				&lt;key&gt;CC&lt;/key&gt;
				&lt;value&gt;45&lt;/value&gt;
			&lt;/templateParameter&gt;
			&lt;templateParameter&gt;
				&lt;key&gt;CB&lt;/key&gt;
				&lt;value&gt;567&lt;/value&gt;
			&lt;/templateParameter&gt;
			&lt;templateParameter&gt;
				&lt;key&gt;CT&lt;/key&gt;
				&lt;value&gt;23M&lt;/value&gt;
			&lt;/templateParameter&gt;
		&lt;/templateParameters&gt;
		&lt;attributes&gt;
			&lt;attribute&gt;
				&lt;key&gt;TCPIP&lt;/key&gt;
				&lt;value&gt;TcpIpServerId&lt;/value&gt;
			&lt;/attribute&gt;
  &lt;/attributes&gt;
&lt;associatedEntities&gt;
			&lt;associatedEntity&gt;
				&lt;id&gt;&lt;Device_Rest&gt;&lt;/id&gt;
				&lt;type&gt;Device&lt;/type&gt;
			&lt;/associatedEntity&gt;
			&lt;associatedEntity&gt;
				&lt;id&gt;Device_Rest2&lt;/id&gt;
				&lt;type&gt;Device&lt;/type&gt;
			&lt;/associatedEntity&gt;
&lt;/associatedEntities&gt;
				&lt;/entity&gt;
&lt;/ext:entities&gt;</codeblock>
         </fig>
      </section>
      <section>
         <p>
            <b>Request parameters</b>
         </p>
         <table rowsep="1" colsep="1" frame="all" pgwide="1">
            <title>Request parameters - notification service interface</title>
            <tgroup cols="4">
               <colspec colname="col1"/>
               <colspec colname="COLSPEC0"/>
               <colspec colname="col2"/>
               <colspec colname="col3"/>
               <thead>
                  <row>
                     <entry>
                        <p>Parameter</p>
                     </entry>
                     <entry>
                        <p>Description</p>
                     </entry>
                     <entry>
                        <p>Valid values</p>
                     </entry>
                     <entry>
                        <p>Mandatory/Optional</p>
                     </entry>
                  </row>
               </thead>
               <tbody>
                  <row>
                     <entry> &lt;entities&gt; </entry>
                     <entry> Root element of the input XML, which contains child elements. </entry>
                     <entry> Class </entry>
                     <entry> Mandatory </entry>
                  </row>
                  <row>
                     <entry>      &lt;entity&gt; </entry>
                     <entry> Contains all required parameters for tagging a notification. </entry>
                     <entry> Class </entry>
                     <entry> Mandatory </entry>
                  </row>
                  <row>
                     <entry>       &lt;id&gt; </entry>
                     <entry> Contains an unique identifier for the device. </entry>
                     <entry> String </entry>
                     <entry> Mandatory </entry>
                  </row>
                  <row>
                     <entry>       &lt;type&gt; </entry>
                     <entry>
                        <p>Describes the device type.</p>
                        <p>
                           <b>Valid values:</b>
                        </p>
                        <ul>
                           <li>
                              <p>Device</p>
                           </li>
                           <li>
                              <p>Group</p>
                           </li>
                        </ul>
                     </entry>
                     <entry> String </entry>
                     <entry> Mandatory </entry>
                  </row>
                  <row>
                     <entry>     &lt;templateId&gt; </entry>
                     <entry> Unique identifier of the template in the database. </entry>
                     <entry> String </entry>
                     <entry> Mandatory </entry>
                  </row>
                  <row>
                     <entry> &lt;templateParameters&gt; </entry>
                     <entry> This tag contains TemplateParameter child tags. </entry>
                     <entry> String </entry>
                     <entry> Optional </entry>
                  </row>
                  <row>
                     <entry> &lt;templateParameter&gt; </entry>
                     <entry> This tag contains key and value child tags. The key-value pairs are
                        used for sending variables and values to NS, so that these can be used in
                        the notification text and subject. </entry>
                     <entry> Class </entry>
                     <entry> Optional </entry>
                  </row>
                  <row>
                     <entry>         &lt;key&gt; </entry>
                     <entry> Key attribute contains list of variable and Server ID. </entry>
                     <entry> String </entry>
                     <entry> Optional </entry>
                  </row>
                  <row>
                     <entry>        &lt;value&gt; </entry>
                     <entry> Value attribute contain list of variable value and server name. </entry>
                     <entry> String </entry>
                     <entry> Optional </entry>
                  </row>
                  <row>
                     <entry> &lt;attributes&gt; </entry>
                     <entry> This tag contains attribute child tags. See <xref
                           href="c_attributes.dita#id9YZ-08540-UG02-PCZZA-d1e26500_attributes/restAttribs"
                        />for the supported attributes. </entry>
                     <entry> Class </entry>
                     <entry> Optional </entry>
                  </row>
                  <row>
                     <entry> &lt;attribute&gt; </entry>
                     <entry> This tag contains key and value child tags. </entry>
                     <entry> Class </entry>
                     <entry> Optional </entry>
                  </row>
                  <row>
                     <entry>         &lt;key&gt; </entry>
                     <entry> Fixed attributes like fallback, priority, etc. </entry>
                     <entry> String </entry>
                     <entry> Optional </entry>
                  </row>
                  <row>
                     <entry>        &lt;value&gt; </entry>
                     <entry> Value of the attribute. </entry>
                     <entry> String </entry>
                     <entry> Optional </entry>
                  </row>
                  <row>
                     <entry> &lt;associatedEntities&gt; </entry>
                     <entry> Used for including selected group members to whom notification will be
                        sent. </entry>
                     <entry> String </entry>
                     <entry> Optional </entry>
                  </row>
               </tbody>
            </tgroup>
         </table>
      </section>
      <section>
         <p>
            <b>Sample response - success</b>
         </p>
         <p>Following is an example of a successful response message from server to client:</p>
         <fig>
            <codeblock>HTTP 200 OK
&lt;response&gt;
		&lt;responseCode&gt;200&lt;/responseCode&gt;
		&lt;responseMessage&gt;Success&lt;/responseMessage&gt;
&lt;/response&gt;</codeblock>
         </fig>
      </section>
      <section>
         <p>
            <b>Sample response - failure</b>
         </p>
         <p>In some cases, the response message from client to server may not go through
            successfully. An example of such a response message is as follows.</p>
         <fig>
            <codeblock>HTTP 400 BAD REQUEST
&lt;errorResponse&gt;
		&lt;errorCode&gt;NS_00001&lt;/errorCode&gt;
		&lt;errorMessage&gt;Device not found.&lt;/errorMessage&gt;
&lt;/errorResponse&gt;</codeblock>
         </fig>
      </section>
   </conbody>
</concept>
